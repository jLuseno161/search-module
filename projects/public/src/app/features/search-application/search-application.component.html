<mat-card class="main-card" ngSkipHydration>
    <mat-card-header style="padding-top: 0;">
        <div class="header-content">
            <div class="title-section">
                <mat-card-title>Search: Application REG/SRCH/{{applicationId}}</mat-card-title>
            </div>
        </div>
    </mat-card-header>

    <br>
    <mat-divider></mat-divider>

    <mat-card-content class="card-content">
        <!-- Add progress bar here-->

        <mat-tab-group class="tab-group">
            <mat-tab label="Application Details">
                <div class="tab-content">
                    <p>Application details content goes here...</p>
                </div>
            </mat-tab>

            <mat-tab label="Documents">
                <div class="tab-content">
                    <p>Documents content goes here...</p>
                </div>
            </mat-tab>

            <mat-tab label="Invoices">
                <div class="tab-content">
                    <div class="invoice-section">
                        <div class="section-header">
                            <h4 class="title">Application Invoices</h4>
                        </div>

                        <mat-card class="invoice-card">
                            <mat-card-content>
                                <div class="">
                                    <table mat-table [dataSource]="invoices" class="invoice-table">
                                        <ng-container matColumnDef="id">
                                            <th mat-header-cell *matHeaderCellDef> No. </th>
                                            <!-- <td mat-cell *matCellDef="let invoice"> {{ invoice.id }} </td> -->
                                            <td mat-cell *matCellDef="let invoice; let i = index">
                                                {{ i + 1 }}
                                            </td>
                                        </ng-container>

                                        <ng-container matColumnDef="date">
                                            <th mat-header-cell *matHeaderCellDef> Date </th>
                                            <td mat-cell *matCellDef="let invoice"> {{ invoice.date }} </td>
                                        </ng-container>

                                        <ng-container matColumnDef="paymentFor">
                                            <th mat-header-cell *matHeaderCellDef> Payment </th>
                                            <td mat-cell *matCellDef="let invoice"> {{ invoice.paymentFor }} </td>
                                        </ng-container>

                                        <ng-container matColumnDef="amount">
                                            <th mat-header-cell *matHeaderCellDef> Total Amount </th>
                                            <td mat-cell *matCellDef="let invoice"> {{ invoice.amount }} </td>
                                        </ng-container>

                                        <ng-container matColumnDef="balance">
                                            <th mat-header-cell *matHeaderCellDef> Balance </th>
                                            <td mat-cell *matCellDef="let invoice"> {{ invoice.balance }} </td>
                                        </ng-container>

                                        <ng-container matColumnDef="status">
                                            <th mat-header-cell *matHeaderCellDef> Status </th>
                                            <td mat-cell *matCellDef="let invoice">
                                                <!-- <span class="status" [class]="getStatusClass(invoice.status)">
                                                    {{ invoice.status }}
                                                </span> -->
                                                <span class="status">
                                                    {{ invoice.status }}
                                                </span>
                                            </td>
                                        </ng-container>

                                        <ng-container matColumnDef="actions">
                                            <th mat-header-cell *matHeaderCellDef> Actions </th>
                                            <td mat-cell *matCellDef="let invoice" class="action-cell">
                                                <button mat-button class="pay-button" (click)="payNow(invoice)" [disabled]="invoice.status === 'Paid'">Pay </button>
                                                <button mat-button class="view-button" (click)="viewInvoice(invoice)">
                                                    <mat-icon>expand_more</mat-icon>
                                                    View
                                                </button>
                                            </td>
                                        </ng-container>

                                        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                                        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
                                    </table>
                                </div>


                                <div class="payment-details-section" *ngIf="dataSource.data.length > 0">
                                    <div class="payment-details">
                                        <h3>Mode of Payment *</h3>
                                        <button mat-raised-button class="mock-payment-btn" (click)="onMockPayment()">
                                            Mock Payments
                                        </button>
                                        <div class="payment-options">
                                            <p>Select your preferred payment method:</p>
                                            <div class="payment-methods">
                                                <button mat-button class="payment-method">
                                                    <mat-icon>credit_card</mat-icon>
                                                    Credit Card
                                                </button>
                                                <button mat-button class="payment-method">
                                                    <mat-icon>phone_iphone</mat-icon>
                                                    Mobile Money
                                                </button>
                                                <button mat-button class="payment-method">
                                                    <mat-icon>account_balance</mat-icon>
                                                    Bank Transfer
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <mat-paginator [pageSize]="pageSize" [length]="totalItems" [pageIndex]="currentPage" [pageSizeOptions]="[5, 10, 20]" (page)="onPageChange($event)" class="invoice-paginator">
                                </mat-paginator>
                            </mat-card-content>
                        </mat-card>
                    </div>
                </div>
            </mat-tab>
        </mat-tab-group>
    </mat-card-content>
</mat-card>